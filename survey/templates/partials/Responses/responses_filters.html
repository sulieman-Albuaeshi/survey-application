<form 
  id="responses-filter-form"
  class="flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4 bg-white border border-gray-200 rounded-t-lg border-b-0"
>
  <!-- Search -->
  <div class="w-full md:w-1/3">
    <label for="simple-search" class="sr-only">Search</label>
    <div class="relative w-full">
      <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
        <svg aria-hidden="true" class="w-5 h-5 text-gray-500" fill="currentColor" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
        </svg>
      </div>
      <input 
        type="text" 
        name="search" 
        value="{{ query|default:'' }}" 
        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 p-2" 
        placeholder="Search surveys..." 
        hx-get="{% url 'Responses' %}" 
        hx-target="#responses-table-and-pagination-container" 
        hx-swap="innerHTML" 
        hx-indicator="#htmx-spinner"
        hx-trigger="keyup changed delay:500ms, search"
        hx-include="#responses-filter-form"
        hx-push-url="true"
      >
    </div>
</div>

  <!-- Filters Group -->
  <div class="w-full md:w-auto flex flex-col md:flex-row items-center gap-3">
      
    <!-- State Filter -->
    <select 
      name="state_filter" 
      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block p-2.5 pr-8" 
      hx-get="{% url 'Responses' %}" 
      hx-target="#responses-table-and-pagination-container" 
      hx-swap="innerHTML" 
      hx-indicator="#htmx-spinner"
      hx-trigger="change"
      hx-push-url="true"
      hx-include="#responses-filter-form"
    >
      <option value="">All States</option>
      <option value="published" {% if state_filter == 'published' %}selected{% endif %}>Published</option>
      <option value="draft" {% if state_filter == 'draft' %}selected{% endif %}>Draft</option>
      <option value="closed" {% if state_filter == 'closed' %}selected{% endif %}>Closed</option>
    </select>

    <!-- Responses Filter -->
    <select 
      name="responses_filter" 
      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block p-2.5 pr-8" 
      hx-get="{% url 'Responses' %}" 
      hx-target="#responses-table-and-pagination-container" 
      hx-swap="innerHTML" 
      hx-indicator="#htmx-spinner"
      hx-trigger="change"
      hx-push-url="true"
      hx-include="#responses-filter-form"
    >
      <option value="">All Responses</option>
      <option value="has_responses" {% if responses_filter == 'has_responses' %}selected{% endif %}>Has Responses</option>
      <option value="no_responses" {% if responses_filter == 'no_responses' %}selected{% endif %}>No Responses</option>
    </select>

    <!-- Date Range -->
    <div class="flex items-center gap-2">
      <input 
        type="date" 
        name="start_date" 
        value="{{ start_date|default:'' }}" 
        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block p-2" 
        hx-get="{% url 'Responses' %}" 
        hx-target="#responses-table-and-pagination-container" 
        hx-swap="innerHTML" 
        hx-indicator="#htmx-spinner"
        hx-trigger="change"
        hx-include="#responses-filter-form"
        hx-push-url="true"
      >
      <span class="text-gray-500">-</span>
      <input 
        type="date" 
        name="end_date" 
        value="{{ end_date|default:'' }}" 
        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block p-2" 
        hx-get="{% url 'Responses' %}" 
        hx-target="#responses-table-and-pagination-container" 
        hx-swap="innerHTML" 
        hx-indicator="#htmx-spinner"
        hx-trigger="change"
        hx-include="#responses-filter-form"
        hx-push-url="true"
      >
    </div>
    
    <!-- Spinner -->
    <span id="htmx-spinner" class="htmx-indicator loading loading-spinner text-primary loading-md"></span>
  </div>
</form>