
{% extends "base.html" %}
{% load survey_extras %}

{% load static %}
{% block navbar %}
<!-- Custom Navbar for Preview Page -->
<div class="navbar bg-white/90 backdrop-blur-md border-b border-slate-200 sticky top-0 z-50 px-4 sm:px-6">
    <!-- Left Side: Go Back -->
    <div class="navbar-start">
        <a href="{{ back_url|default:'#'}}" 
        class="btn btn-secondary btn-sm gap-2 rounded-full font-medium shadow-sm hover:shadow-md transition-all">
            <i class="fa-solid fa-arrow-left"></i>
            Go Back
        </a>
    </div>
        <!-- Center: Title (Optional) -->
    <div class="navbar-center hidden sm:flex">
        <span class="font-bold text-slate-700 text-lg">
            Survey Preview
        </span>
    </div>
     <!-- Right Side: Close Button -->
     <div class="navbar-end"> 
         {% comment %} <button onclick="window.close()" class="btn btn-sm btn-ghost text-slate-500">Close Preview</button> {% endcomment %}
    </div> 
</div>
{% endblock navbar %}

{% block content %}
<div class="min-h-screen bg-slate-50 py-12 px-4 sm:px-6">
    
    <div class="max-w-3xl mx-auto space-y-6">

        {% block preview_banner %}
            <!-- Preview Banner -->
            <div class="alert bg-blue-50 border-blue-100 text-blue-800 shadow-sm rounded-lg flex items-center justify-center gap-3">
                <i class="fa-solid fa-eye"></i>
                <span class="font-medium text-sm">Preview Mode: Responses will not be saved.</span>
            </div>
        {% endblock %}

        <!-- Survey Title Card -->
        <div class="card bg-white shadow-sm border border-slate-200 rounded-t-xl overflow-hidden">
            <div class="h-2 w-full bg-primary"></div> <!-- Top Accent Line -->
            <div class="card-body p-8 sm:p-10">
                <h1 class="text-4xl font-extrabold text-slate-800 tracking-tight">{{ survey.title }}</h1>
                {% if survey.description %}
                    <p class="mt-4 text-lg text-slate-500 leading-relaxed whitespace-pre-wrap">{{ survey.description }}</p>
                {% endif %}
            </div>
        </div>

        <!-- Questions Form -->
        <form onsubmit="event.preventDefault();" class="space-y-6" x-data="{ page: 0, total: {{ questions|group_by_sections:survey.shuffle_questions|length }} }">
            {% include "partials/survey_questions_display.html" %}
        </form>
        </form>
        
        <!-- Branding Footer (Optional) -->
        <div class="text-center py-6">
            <span class="text-slate-300 text-xs font-semibold uppercase tracking-widest">Powered by koko Survey</span>
        </div>

    </div>
</div>
{% endblock %}